## この資料の読み方

この資料では簡単なライントレースプログラムを動かすために必要な
プログラミングの知識を説明している。プログラミングをしたことないことを
想定して書かれているため、プログラミング経験がある人にとっては
既に知っている内容がほとんどかもしれない。
その場合は、既に知ってる内容はどんどん飛ばして先に進んでしまって構わない。
また、資料の最後には動くライントレーサプログラムのソースコードがあるため、
それを写してしまえばライントレーサ回路が正常に動作しているか確認できる。

## 最初に

スイッチとLEDやモータだけでも簡単な電子回路なら作れるが、
手動でのスイッチのON/OFFによって、単調な動作を行わせることしかできない。
自動入力によって人力では不可能なほど高速な動作を行ったり、
部品を同時にたくさん制御して高度な動作を行ったりするためには、
**IC**（集積回路, Integrated Circuit)というものを使う必要がでてくる。

今日はそのICの中でも、コンピュータにソフトをインストール・アンインストール
するかのように、柔軟に動作の組み込み・書き換えができる**マイコン**
（マイクロコントローラ, Microcontroller）というものを使ってみよう。

コンピュータのソフトウェアと同じように、マイコンを動かすためにはパソコン上で
**プログラミング言語**という言葉で文章（のようなもの）を書いて、
それをマイコンのCPUに伝えるために **機械語**というものに翻訳しなければならない
（この翻訳作業を**コンパイル**と呼ぶ）。
そして、翻訳済のファイルをマイコンに書き込むと、プログラムはマイコンに
「インストール」されて実行できるようになる。あまり深いことは考えず、
**マイコンはコンピュータのようなもの**と認識しておこう。

では、早速マイコンに書き込むためのプログラムを作ってみよう。
まだ配られたUSBに入っているArduino用の開発環境とマイコン用のドライバの
インストールをしていなかったら、今の内に始めておこう。

インストールには時間がかかるだろうから、待っている間にプログラミング言語の
基礎を学んでおこう。プログラミングをしたことのない人のために、
プログラミング言語というものについて簡単に説明しよう。
コンピュータやマイコンは、機械語という言語で書かれた単純な命令の羅列を
上から順番に実行するようにできている。日本語で例えると、

```
相手の名前を聞け。
「こんにちは」と言え。
相手の名前を言え。
「さん」と言え。
動作を終了しろ。
```

と命令を並べれば、「太郎」と言うと「こんにちは太郎さん」と
返事をしてくれるわけだ。しかし、機械語というだけあって
実際は人間にはとても読み書きできるものではない。
そこで、機械語の構造（命令の列を上から実行する）を保ちつつも
人間にとって理解・記述しやすい書き方にしたのが、いわゆるプログラミング言語だ。
プログラミング言語は人間にはわかりやすいのだが
単純な命令しか理解できない機械には複雑すぎて伝わらない。
そこで、プログラミング言語で書かれた文章をコンパイルして機械語にして
あげるというわけだ。ちなみに、プログラミング言語で書かれた文章のことを
**ソースコード**（しばしば**コード**と略される）と呼ぶ。では試してみよう。
例えば、コンピュータに文章を表示させるには次のように記述する。

```cpp
print("Hello, World!");
```

これを実行すると画面次のように表示される。

```cpp
Hello, World!
```

ここで先程のコード（プログラミング言語で書かれた命令の集合体を指す）
を解読していこう。この一行は`print`の部分、括弧と二重引用符（`"`）
に囲まれた`Hello, World!`、そしてセミコロン（`;`）により構成されている。
画面に表示されたのは`Hello, World!`であることから`print`は表示に
何か関係があることと、括弧と引用符に囲まれた内容が出力の中身になることは
察しがつくと思う。このプログラムを例えば`Hello, World!`ではなく
`Hello, Arduino World!`と表示するように改変したいとしたら、どこをどう変えれば
いいかなんとなくわかるはずだ。

まずは`print`部だが、これは実は**関数**と言って、命令をまとめて名前をつけたものだ。
そして、関数を呼び出すとき、関数名のあとに`()`をつけて、文の終わりを示す`;`を
つける。`print`のように関数に値を渡したいときは`()`の中に渡す値をカンマ区切りで
記述する。例えば、関数`f`に`1`, `2`, `3`という引数を渡して呼び出すには、
次のように書けば良い。

```cpp
f(1, 2, 3);
```

そして、このとき`1`, `2`, `3`が二重引用符に囲まれていないことに注目してほしい。
コンピュータやマイコンは数値や文字列などのデータの種類を**型**というもので
識別する。とりあえずは、**先ほどの"Hello, World"は文字列だから文字列型の
データで、`1`, `2`, `3`などは数字型のようなデータとしてコンピュータや
マイコンは捉えている、**という認識で問題ない。そして、例えば文字列は
二重引用符で囲まれることにより判別されている。だから、二重引用符を書き忘れたり、
書き間違えたりするとコンピュータやマイコンはそのデータがどのような種類のものか
判別がつかなくなって困ってしまい、エラーが出るというわけだ。

